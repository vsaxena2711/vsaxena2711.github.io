<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Deploy Azure VM using Terraform & Terragrunt | AInfraMinds</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-Q9KS4FM50S"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-Q9KS4FM50S")</script><link rel=stylesheet href=/css/custom.css><title>Deploy Azure VM using Terraform & Terragrunt | AInfraMinds</title><meta name=description content="Learn how to deploy an Azure Virtual Machine using a modular Terraform setup and manage it with Terragrunt. Includes sample code and real-world structure."><meta name=keywords content="Azure,Terraform,IaC,DevOps,AI,Terragrunt,Azure CLI,Cloud Engineering"><meta name=author content="Vaibhav Saxena"><meta name=robots content="index, follow"><meta property="og:title" content="Deploy Azure VM using Terraform & Terragrunt"><meta property="og:description" content="Learn how to deploy an Azure Virtual Machine using a modular Terraform setup and manage it with Terragrunt. Includes sample code and real-world structure."><meta property="og:url" content="https://ainframinds.com/iac/code-in-action/deploy-azure-vm-with-terragrunt/"><meta property="og:type" content="article"><meta name=twitter:card content="summary"><meta name=twitter:title content="Deploy Azure VM using Terraform & Terragrunt"><meta name=twitter:description content="Learn how to deploy an Azure Virtual Machine using a modular Terraform setup and manage it with Terragrunt. Includes sample code and real-world structure."><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"Deploy Azure VM using Terraform \u0026 Terragrunt","description":"Learn how to deploy an Azure Virtual Machine using a modular Terraform setup and manage it with Terragrunt. Includes sample code and real-world structure.","author":{"@type":"Person","name":"Vaibhav Saxena"},"datePublished":"2025-04-14 00:00:00 \u002b0000 UTC"}</script></head><body><h1>AInfraMinds</h1><nav><ul><li><a href=/about/>About</a></li><li><a href=/contact/>Contact</a></li></ul></nav><main class=main><h2 id=-introduction>ğŸš€ Introduction</h2><p>In this post, weâ€™ll walk through a practical example of deploying an Azure <strong>Virtual Machine</strong> using a <strong>reusable Terraform module</strong>, and orchestrating the inputs with <strong>Terragrunt</strong>.</p><p>Whether you&rsquo;re spinning up a dev VM or preparing infrastructure for your next project, this setup is flexible, scalable, and clean â€” ideal for managing multiple environments with minimal duplication.</p><hr><h2 id=-code-repository>ğŸ”— Code Repository</h2><p>All source code is hosted publicly on GitHub:<br>ğŸ“ <strong>Terraform Module</strong>: <a href=https://github.com/vsaxena2711/tf-brickstack/tree/main/azure-vm-module><code>tf-brickstack/azure-vm-module</code></a></p><p>ğŸ“„ <strong>Terragrunt Configuration</strong>:<br>Refer to this sample config to see how inputs are passed:<br>ğŸ‘‰ <a href=https://github.com/vsaxena2711/tg-brickflow/blob/main/azure/dev/vm/terragrunt.hcl><code>terragrunt.hcl</code></a></p><hr><h2 id=-why-this-setup>ğŸ’¡ Why This Setup?</h2><p>This approach shows:</p><ul><li>âœ… <strong>Modular Terraform</strong>: Write once, reuse everywhere</li><li>ğŸ§  <strong>Clean Separation</strong>: Code (Terraform) vs Config (Terragrunt)</li><li>ğŸ”„ <strong>Environment Agility</strong>: Easily switch between dev, stage, prod</li><li>ğŸ” <strong>Better Secrets Management</strong>: Use Terragrunt for secure input abstraction</li></ul><hr><h2 id=-what-the-module-includes>ğŸ“¦ What the Module Includes</h2><p>This Terraform module provisions the following Azure resources:</p><ul><li><strong>Resource Group</strong></li><li><strong>Virtual Network</strong> + Subnet</li><li><strong>Network Interface</strong></li><li><strong>Linux Virtual Machine</strong> (Ubuntu)</li></ul><hr><h2 id=-how-terragrunt-helps>ğŸ› ï¸ How Terragrunt Helps</h2><p>Terragrunt is like a smart wrapper around Terraform.</p><p>You define your core infrastructure using Terraform â€” and use Terragrunt to:</p><ul><li>Pass input variables cleanly</li><li>Reuse backend settings and provider configs</li><li>Handle dependencies (e.g., shared subnets or identities)</li><li>Manage multi-env deployments without duplicating <code>.tf</code> files</li></ul><p><strong>Sample Terragrunt usage:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-hcl data-lang=hcl><span style=display:flex><span><span style=color:#66d9ef>terraform</span> {
</span></span><span style=display:flex><span>  source <span style=color:#f92672>=</span> &#34;git::https://github.com/vsaxena2711/tf-brickstack.git//azure-vm-module?ref<span style=color:#f92672>=</span><span style=color:#66d9ef>main</span><span style=color:#960050;background-color:#1e0010>&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>inputs <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  vm_name       <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;vm-dev-001&#34;</span>
</span></span><span style=display:flex><span>  location      <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;East US&#34;</span>
</span></span><span style=display:flex><span>  admin_user    <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;azureuser&#34;</span>
</span></span><span style=display:flex><span>  vm_size       <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Standard_B1s&#34;</span>
</span></span><span style=display:flex><span>  rg_name       <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;rg-dev-vm&#34;</span>
</span></span><span style=display:flex><span>  vnet_name     <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;vnet-dev&#34;</span>
</span></span><span style=display:flex><span>  subnet_name   <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;subnet-dev&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div style=text-align:center;margin-top:2.5rem><a href=/iac/code-in-action/ class=home-button>ğŸ‘‰ Return to Code in Action</a>
<a href=/iac/ class=home-button style=margin-left:.5rem>ğŸ“¦ Return to Infra World</a>
<a href=/ class=home-button style=margin-left:.5rem>ğŸ  Take Me Home</a></div><script src=https://giscus.app/client.js data-repo=vsaxena2711/vsaxena2711.github.io data-repo-id=REPO_ID data-category=General data-category-id=CATEGORY_ID data-mapping=pathname data-reactions-enabled=1 data-theme=light crossorigin=anonymous async></script></main><p>Copyright 2025. All rights reserved.</p></body></html>