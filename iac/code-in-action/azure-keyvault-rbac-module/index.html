<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Create an Azure Key Vault (RBAC-based) using Terraform & Terragrunt | AInfraMinds</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-Q9KS4FM50S"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-Q9KS4FM50S")</script><link rel=stylesheet href=/css/custom.css><title>Create an Azure Key Vault (RBAC-based) using Terraform & Terragrunt | AInfraMinds</title><meta name=description content="Azure, Terraform, AI, DevOps tips and tutorials."><meta name=keywords content="Azure,Terraform,IaC,DevOps,AI,Terragrunt,Azure CLI,Cloud Engineering"><meta name=author content="Vaibhav Saxena"><meta name=robots content="index, follow"><meta property="og:title" content="Create an Azure Key Vault (RBAC-based) using Terraform & Terragrunt"><meta property="og:description" content><meta property="og:url" content="https://ainframinds.com/iac/code-in-action/azure-keyvault-rbac-module/"><meta property="og:type" content="article"><meta name=twitter:card content="summary"><meta name=twitter:title content="Create an Azure Key Vault (RBAC-based) using Terraform & Terragrunt"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"Create an Azure Key Vault (RBAC-based) using Terraform \u0026 Terragrunt","description":"","author":{"@type":"Person","name":"Vaibhav Saxena"},"datePublished":"2025-04-18 00:00:00 \u002b0000 UTC"}</script></head><body><h1>AInfraMinds</h1><nav><ul><li><a href=/about/>About</a></li><li><a href=/contact/>Contact</a></li></ul></nav><main class=main><h2 id=-overview>🔐 Overview</h2><p>In this guide, we’ll build a verbose and reusable <strong>Terraform module</strong> for provisioning an <strong>Azure Key Vault</strong> using <strong>RBAC-based access control</strong> — the recommended model by Microsoft.</p><p>We&rsquo;ll also show how to call the module from a <strong>Terragrunt</strong> config file, keeping inputs clean and environment-friendly.</p><hr><h2 id=-access-policy-vs-rbac-model>🤔 Access Policy vs. RBAC Model</h2><p>Azure Key Vault supports two access models:</p><table><thead><tr><th>Model</th><th>Description</th><th>Recommended?</th></tr></thead><tbody><tr><td>Access Policy</td><td>Classic model where you explicitly define what each principal can do</td><td>❌ Legacy</td></tr><tr><td>RBAC</td><td>Uses Azure’s Role-Based Access Control via Azure AD</td><td>✅ Yes!</td></tr></tbody></table><p>Microsoft recommends using <strong>RBAC-based authorization</strong> for improved security, flexibility, and centralized role management.</p><blockquote><p>✅ <strong>This post uses RBAC-based Key Vaults only. No <code>access_policy</code> blocks will be used in the module.</strong></p></blockquote><hr><h2 id=-module-code-repository>🧱 Module Code Repository</h2><p>Terraform module:
👉 <a href=https://github.com/vsaxena2711/tf-brickstack/tree/main/azure-key-vault-module>tf-brickstack:azure-kv-module</a></p><p>Terragrunt config:
👉 <a href=https://github.com/vsaxena2711/tg-brickflow/tree/main/azure/dev/keyvault>tg-brickflow:azure-kv</a></p><hr><h2 id=-what-this-module-covers>⚙️ What This Module Covers</h2><p>The module provisions:</p><ul><li>A secure Azure Key Vault (RBAC-based)</li><li>Network restrictions using <code>network_acls</code></li><li>Soft delete retention</li><li>Tagging</li><li>Public network access toggle</li><li>Optional private access via subnet</li></ul><hr><h2 id=-references>📌 References</h2><p>📘 <a href=https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/key_vault>Terraform for Azure Key Vault</a></p><p>📘 <a href=https://learn.microsoft.com/en-us/azure/key-vault/general/best-practices>Best practices for using Azure Key Vault</a></p><p>📘 <a href="https://learn.microsoft.com/en-us/azure/key-vault/general/rbac-guide?tabs=azure-cli">Provide access to Key Vault objects with Azure RBAC</a></p><div style=text-align:center;margin-top:2.5rem><a href=/iac/code-in-action/ class=home-button>👉 Return to Code in Action</a>
<a href=/iac/ class=home-button style=margin-left:.5rem>📦 Return to Infra World</a>
<a href=/ class=home-button style=margin-left:.5rem>🏠 Take Me Home</a></div><script src=https://giscus.app/client.js data-repo=vsaxena2711/vsaxena2711.github.io data-repo-id=REPO_ID data-category=General data-category-id=CATEGORY_ID data-mapping=pathname data-reactions-enabled=1 data-theme=light crossorigin=anonymous async></script></main><p>Copyright 2025. All rights reserved.</p></body></html>